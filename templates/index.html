{% extends "layout.html" %}
{% block content %}

<h2 class="text-center mb-4">Available Rooms</h2>

<!-- AVAILABILITY FORM -->
<form method="get" class="row mb-4">
  <div class="col-md-4">
    <input type="date" name="check_in" class="form-control"
           value="{{ check_in }}" required>
  </div>
  <div class="col-md-4">
    <input type="date" name="check_out" class="form-control"
           value="{{ check_out }}" required>
  </div>
  <div class="col-md-4">
    <button class="btn btn-primary w-100">Check Availability</button>
  </div>
</form>

{% if rooms|length == 0 %}
  <div class="alert alert-warning text-center">
    No rooms are available for the selected dates.
  </div>
{% endif %}

<div class="row">
  {% for r in rooms %}
  <div class="col-md-4 mb-4">
    <div class="card shadow h-100">

      <img src="{{ r[4] }}"
           class="card-img-top"
           style="height:200px;object-fit:cover;">

      <div class="card-body">
        <h5>{{ r[2] }}</h5>
        <p>Room {{ r[1] }} | Max {{ r[5] }} guests</p>
        <p><strong>â‚¹ {{ r[3] }}</strong></p>

        {% if check_in and check_out %}
        <a href="{{ url_for('book', room_id=r[0]) }}?check_in={{ check_in }}&check_out={{ check_out }}"
           class="btn btn-primary w-100">
          Book Now
        </a>
        {% else %}
        <button class="btn btn-secondary w-100" disabled>
          Select Dates
        </button>
        {% endif %}
      </div>

    </div>
  </div>
  {% endfor %}
</div>

{% endblock %}